#!/bin/bash
{% set executable = "tess" %}
{% set pause = "tessdb_pause" %}
{% set resume = "tessdb_resume" %}
# Pause tessdb execution
{{ pause }}

{% for location in locations %}
### {{ location.stars }} ###
sudo {{ executable }} location create "{{ location['Nombre lugar'] }}" --longitude "{{ location.Longitud }}" --latitude "{{ location.Latitud }}" --elevation "{{ location.MSNM | float }}" --dbase "{{ database }}"
{% if location.owner is defined -%}
sudo {{ executable }} location update "{{ location['Nombre lugar'] }}" --dbase "{{ database }}" --owner "{{ location.owner }}"
{% endif -%}
{% if location.email is defined -%}
sudo {{ executable }} location update "{{ location['Nombre lugar'] }}" --dbase "{{ database }}" --email "{{ location.email }}"
{% endif -%}
{% if location.org is defined -%}
sudo {{ executable }} location update "{{ location['Nombre lugar'] }}" --dbase "{{ database }}" --org "{{ location.org }}"
{% endif -%}
sudo {{ executable }} instrument assign --name {{ location.stars }} --location "{{ location['Nombre lugar'] }}" --dbase "{{ database }}"
sudo {{ executable }} instrument enable -n {{ location.stars }}  --dbase "{{ database }}"
{% endfor -%}


# Resume tessdb execution
{{ resume }}
